<!-- spinner -->
<div>
  <div [class]="this.senddingRequest ? 'overlay show' : 'overlay'"></div>
  <div [class]="this.senddingRequest ? 'spanner show' : 'spanner'">
    <div class="loader"></div>
    <p>Patienter pendans l'operations</p>
  </div>
</div>
<p-toast></p-toast>
<div class="container-fluid">
  <div class="row">
      <!-- side menu section -->
      <app-side-bar></app-side-bar>
      <div class="mr-mobile-right">
          <!-- header start -->
          <app-header></app-header>
          <!-- header end -->
          <!-- main content start -->
             <div class="main-content">
               <div class="mr-auto ml-auto text-center">
                <h1 class="mb-4 title-imp">Imprimer des etats</h1>
                <!-- button section -->
                 <div class="btn-section">
                   <button pButton pRipple (click)="this.openDialog('pvf')" label="pv finaux" icon="pi pi-print" class="p-button-info "></button>
                   <button pButton pRipple (click)="this.openDialog('ats')" label="attestations" icon="pi pi-print" class="p-button-info mr-2 ml-2"></button>
                   <button pButton pRipple (click)="this.openDialog('pvs')" label="pv de synthese" icon="pi pi-print" class="p-button-info mr-2"></button>
                   <button pButton pRipple (click)="this.openDialog('psc')" label="cartes d'etudiants" icon="pi pi-print" class="p-button-info"></button>
                 </div>
               </div>
               <!-- prev-section -->
               <div class="preview mt-4 min-vh-50 w-100 text-center">
                 <p *ngIf="this.reportPath == ''" class="m-0 p-0">zone de visualisation</p>

                <ngx-extended-pdf-viewer
                      *ngIf="this.reportPath != ''"
                      [src]="this.reportPath"
                      [useBrowserLocale]="true">
                  </ngx-extended-pdf-viewer>
               </div>
              </div>
          <!-- main content end -->
      </div>
  </div>
</div>
<p-dialog [style]="{width: '700px'}" header="Imprimer  un rapport" [(visible)]="dataDialog" [modal]="true"
  [maximizable]="true" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
  <form [formGroup]="dataForm"  (ngSubmit)="getFile($event)">
    <div class="form-group">
      <label for="classe">Classe</label>
      <select id="classe" class="form-control" [required]="pvsRequired" formControlName="classe" [(ngModel)]="this.reportModel.classe">
        <option *ngFor="let item of classes"  [value]="item.libelle">{{ item.libelle }}</option>
      </select>    
    </div>
    <div class="form-group">
      <label for="niveau">Niveau</label>
      <select id="niveau" class="form-control"  formControlName="niveau" [(ngModel)]="this.reportModel.niveau">
        <option *ngFor="let item of niveaux"   [value]="item.libelle">{{ item.libelle }}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="specialite">Specialite</label>
      <select id="specialite" class="form-control"  formControlName="specialite" [(ngModel)]="this.reportModel.specialite">
        <option *ngFor="let item of specialites"  [value]="item.libelle">{{ item.libelle }}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="year">Annee Academique</label>
      <select id="year" class="form-control"  formControlName="annee_academique" [(ngModel)]="this.reportModel.annee_academique">
        <option *ngFor="let item of annee_academiques"  [value]="item.libelle">{{ item.libelle }}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="semestre">Semestre</label>
      <select id="semestre" class="form-control" [required]="pvfRequired || pvsRequired " formControlName="semestre" [(ngModel)]="this.reportModel.semestre">
        <option *ngFor="let item of semestres"  [value]="item.libelle">{{ item.libelle }}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="fil">Filiere</label>
      <select id="fil" class="form-control"  formControlName="filiere" [(ngModel)]="this.reportModel.filiere">
        <option *ngFor="let item of filieres" [value]="item.libelle">{{ item.libelle }}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="format">Format</label>
      <select id="format" class="form-control"  formControlName="format" [(ngModel)]="this.reportModel.format">
        <option>pdf</option>
        <option>xls</option>
      </select>
    </div>
    <div class="d-flex">
      <button type="submit" [disabled]="dataForm.invalid || senddingRequest" class="btn d-flex justify-content-center align-items-center btn-primary w-100">
        <span *ngIf="!senddingRequest">imprimer</span>
        <div *ngIf="senddingRequest" class="spinner-border text-sucess" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </button>
    </div>
  </form>
</p-dialog>
